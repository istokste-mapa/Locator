<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lok√°tor Slu≈æieb üß≠</title>
    <style>
        /* CSS zost√°va rovnak√Ω pre jednoduchos≈• */
        body {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding-top: 5vh;
            font-family: Arial, sans-serif;
            background-color: #f4f7f6;
            text-align: center;
        }

        .container {
            padding: 20px;
            width: 100%;
            max-width: 450px;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .action-button {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            color: white;
            background-color: #1a73e8;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, transform 0.1s;
        }

        .action-button.restaurants { background-color: #ea4335; }
        .action-button.museums { background-color: #fbbc04; }
        .action-button.rentals { background-color: #34a853; }
        .action-button.groceries { background-color: #4285f4; }
        .action-button.parking { background-color: #7047a1; }

        .action-button:hover { opacity: 0.9; }
        .action-button:active { transform: scale(0.98); }

        .status-message {
            color: #333;
            font-size: 14px;
            min-height: 20px;
            margin-top: 30px;
        }

        .pwa-tip {
            margin-top: 40px;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 12px;
            color: #555;
            line-height: 1.4;
        }
        .pwa-tip strong {
            display: block;
            margin-bottom: 5px;
            color: #1a73e8;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Vyhƒæada≈• v okol√≠</h1>

        <div class="button-group">
            <button class="action-button restaurants" onclick="findPlaces('restaurants')">
                üçΩÔ∏è Re≈°taur√°cie
            </button>
            <button class="action-button museums" onclick="findPlaces('museums and historical places')">
                üèõÔ∏è Pamiatky a M√∫ze√°
            </button>
            <button class="action-button rentals" onclick="findPlaces('car rental, bike rental, scooter rental')">
                üöó Po≈æiƒçovne
            </button>
            <button class="action-button groceries" onclick="findPlaces('groceries and supermarkets')">
                üõí Potraviny a Obchody
            </button>
            <button class="action-button parking" onclick="findPlaces('parking lots and garages')">
                üÖøÔ∏è Parkovisko
            </button>
        </div>

        <p class="status-message" id="status">Vyberte kateg√≥riu, ktor√∫ chcete n√°js≈•.</p>
        
        <div class="pwa-tip">
            <strong>TIP: Pou≈æ√≠vajte ako aplik√°ciu!</strong>
            Pre najr√Ωchlej≈°√≠ pr√≠stup kliknite v prehliadaƒçi na **tri bodky** (‚ãÆ) a zvoƒæte **"Prida≈• na plochu"**. Vytvor√≠te si tak ikonu pre okam≈æit√© spustenie.
        </div>
    </div>

    <script>
        function findPlaces(query) {
            const statusElement = document.getElementById('status');
            statusElement.textContent = `Zis≈•ujem polohu pre "${query}"... üõ∞Ô∏è`;

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        
                        statusElement.textContent = `Poloha zisten√°! Otv√°ram Mapy...`;

                        // 1. Vytvorenie ƒçistej URL pre vyhƒæad√°vanie
                        const mapsQuery = `${encodeURIComponent(query)}&center=${lat},${lon}`;
                        
                        // 2. Vytvorenie dynamick√©ho formul√°ra na odoslanie na Google Mapy
                        const form = document.createElement('form');
                        form.action = `https://www.google.com/maps/search/`; // Najƒçistej≈°ia mo≈æn√° akcia
                        form.method = 'GET';
                        form.target = '_blank';
                        form.style.display = 'none';

                        // Vlo≈æenie vyhƒæad√°vacieho dopytu ako poƒæa 'q'
                        const inputQ = document.createElement('input');
                        inputQ.type = 'hidden';
                        inputQ.name = 'api'; // Aby bol form√°t query ƒçist√Ω
                        inputQ.value = 1;
                        form.appendChild(inputQ);

                        const inputCenter = document.createElement('input');
                        inputCenter.type = 'hidden';
                        inputCenter.name = 'query';
                        inputCenter.value = `${query}`;
                        form.appendChild(inputCenter);

                        const inputLL = document.createElement('input');
                        inputLL.type = 'hidden';
                        inputLL.name = 'center';
                        inputLL.value = `${lat},${lon}`;
                        form.appendChild(inputLL);


                        // 3. Pripojenie formul√°ra a okam≈æit√© odoslanie
                        document.body.appendChild(form);
                        form.submit();

                        // 4. Vyƒçistenie
                        setTimeout(() => {
                            document.body.removeChild(form);
                            statusElement.textContent = 'Vyberte kateg√≥riu, ktor√∫ chcete n√°js≈•.'; 
                        }, 1000);

                    },
                    (error) => {
                        // Spracovanie ch√Ωb
                        let errorMessage = "Nastala nezn√°ma chyba.";
                        if (error.code === error.PERMISSION_DENIED) {
                            errorMessage = "Pr√≠stup k polohe zamietnut√Ω. Povoƒæte polohu v nastaveniach prehliadaƒça.";
                        } else if (error.code === error.POSITION_UNAVAILABLE) {
                            errorMessage = "Inform√°cie o polohe nie s√∫ dostupn√©. Sk√∫ste to znova nesk√¥r.";
                        } else if (error.code === error.TIMEOUT) {
                            errorMessage = "Vypr≈°al ƒçasov√Ω limit. Sk√∫ste to znova.";
                        }
                        statusElement.textContent = `Chyba: ${errorMessage}`;
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            } else {
                statusElement.textContent = "V√°≈° prehliadaƒç nepodporuje geolok√°ciu.";
            }
        }
    </script>
</body>
</html>
